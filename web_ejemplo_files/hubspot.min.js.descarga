function getUrlPath(){var t=window.location.pathname,e=t.split("/")[1],o="";return idContent=t,"blog"===e?(o="blog",idContent="undefined"!=document.querySelector("body").dataset.postSlug?document.querySelector("body").dataset.postSlug:""):o="blog","<"+o+"> "+(""!=idContent?"<id: "+idContent+"> ":"")}
var HUBSPOT_PORTAL_ID="8180620",MAIN_FORM_ID="80f891ab-4f8d-450b-a588-6569de1585fa",SUBSCRIBE_URL="https://api.hsforms.com/submissions/v3/integration/submit/"+HUBSPOT_PORTAL_ID+"/"+MAIN_FORM_ID,FORM_URL="https://forms.hsforms.com/embed/v3/form/"+HUBSPOT_PORTAL_ID+"/"+MAIN_FORM_ID+"/json?hutk=";function _setCookie(e,t,n){var o,a="",n=(n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),a="; expires="+o.toUTCString()),"object"==typeof t?JSON.stringify(t):t);document.cookie=e+"="+(n||"")+a+"; path=/"}function _getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}var hubspotIntegration=function(e,t,n){var o=e.find(function(e){return"firstname"==e.name}),a=(e.find(function(e){return"gmv"==e.name}),e.find(function(e){return"LEGAL"==e.name}));var s={},e=(o&&(e.push(function(e){for(var t,n=e.value.split(" "),o=[],a=1;a<n.length;a++)o.push((t=n[a]).charAt(0).toUpperCase()+t.slice(1));return{name:"lastname",value:o.join(" ")}}(o)),o.value=o.value.split(" ")[0]),e=e.filter(function(e){return"LEGAL"!==e.name}),s.fields=e,o=window.location.search,{source:(o=new URLSearchParams(o)).get("utm_source"),medium:o.get("utm_medium"),campaign:o.get("utm_campaign"),content:o.get("utm_content")});s.fields.push({name:"utm_source",value:e.source||""}),s.fields.push({name:"utm_medium",value:e.medium||""}),s.fields.push({name:"utm_campaign",value:e.campaign||""}),s.fields.push({name:"utm_content",value:e.content?e.campaign:""}),s.context={hutk:_getCookie("hubspotutk"),pageUri:window.location.href,pageName:getUrlPath()+document.title},null!=a&&(o="true"==a.value,(e={}).consent={consentToProcess:o,text:"User is giving us consent to send messages",communications:[{value:o,subscriptionTypeId:999,text:"Consent for sending marketing messages"}]},1==o&&(s.legalConsentOptions=e)),window.dataLayer&&(event_label=window.location.pathname,dataLayer.push({event:"ga_event",eventCategory:"<blog><form>",eventAction:"<submitted><subscribe-form>",eventLabel:event_label,nonInteraction:!1})),async function(e="",t={}){const n=await fetch(e,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok)return n.json();throw e="an error has ocurred: "+n.status,amplitude_log_event("hubspot_error",{pageName:getUrlPath()}),new Error(e)}(SUBSCRIBE_URL,s).then(e=>{n&&n()}).catch(e=>{console.error(e)})},hubspotCustomEvents=function(e){"string"==typeof e?((window._hsq=window._hsq||[]).push(["trackEvent",{id:e}]),console.warn("Event "+e+" was fired")):console.warn("eventID is invalid")};
const FORM_STEP_COOKIE="hubspot_form_step",USER_DATA_COOKIE="hubspot_user_data",FORM_WRAPPER_ID="#hubspot-form",FORM_RESPONSE_WRAPPER_ID="#hubspot-form-response",HUBSPOT_FORM_SUBMIT_EVENT=new CustomEvent("onHubspotFormSubmit"),FORM_SECTION_WRAPPER_CLASSES=[".form-subscribe",".banner-subscribe-wrapper"],FORM_LANG="string"==typeof CURRENT_LANG?CURRENT_LANG:"br",HUBSPOT_FORM_ID={br:"8250e9d5-b019-4727-948f-0bb2263518db",ar:"e785bf7a-8e6e-4dd8-ae64-c1ebe16463fe",mx:"9e92c77a-d06b-43c5-b3c6-98669d1fa5ca"},HUBSPOT_FORM_NEWSLETTER_ID={br:"0e440536-d7d7-4501-8e2c-e16e5954e4ba",ar:"b3562c88-7877-4d1b-93ff-420b0a9bd58c",mx:"6c8ec3c4-02b9-4a37-840f-3313010ab609",co:"e4b3d13d-88fb-499d-b8ea-39e90466e934"};let fieldsToTransformArray=[{name:"origin_url",type:"text",newValue:window.location.pathname}];function getFormIdByLanguage(){return HUBSPOT_FORM_ID[FORM_LANG]||HUBSPOT_FORM_ID.ar}const HUBSPOT_FORM_EMBED={currenStep:()=>_getCookie(FORM_STEP_COOKIE),hasFinished(){return"finish"==this.currenStep()},generateForm(e={}){const t=document.createElement("script");t.defer=!0,t.src="https://js.hsforms.net/forms/v2.js",document.body.appendChild(t),t.addEventListener("load",()=>{window.hbspt&&window.hbspt.forms.create({region:"na1",portalId:HUBSPOT_PORTAL_ID,formId:e.formId||getFormIdByLanguage(),target:e.target||FORM_WRAPPER_ID,pageName:getUrlPath()+document.title})})},checkFormStep(){const e=document.querySelector(FORM_WRAPPER_ID);var t;e&&(t=e.querySelector('input[name="hs_context"]').value,(t=JSON.parse(t).renderedFieldsIds.length<=1)&&(console.log("[Hubspot embed]: Form is empty"),FORM_SECTION_WRAPPER_CLASSES.forEach(e=>{document.querySelector(e)&&document.querySelector(e).remove()})),t&&"finish"!=this.currenStep()&&_setCookie(FORM_STEP_COOKIE,"finish"))},onSubmitForm(){const e=document.querySelector(FORM_RESPONSE_WRAPPER_ID);var t;e&&e.classList.remove("hide"),this.currenStep()?1==this.currenStep()&&_setCookie(FORM_STEP_COOKIE,"finish"):(t=event.data["data"],t={name:t.submissionValues.firstname},_setCookie(USER_DATA_COOKIE,t),_setCookie(FORM_STEP_COOKIE,1))},bindEvents(t,o){window.addEventListener("message",e=>{"hsFormCallback"===e.data.type&&"onFormReady"===e.data.eventName&&(console.log("[Hubspot embed]: Form generated"),this.checkFormStep(),transformFormFieldsOnFormReady(fieldsToTransformArray),t&&t()),"hsFormCallback"===e.data.type&&"onFormSubmitted"===e.data.eventName&&(document.dispatchEvent(HUBSPOT_FORM_SUBMIT_EVENT),console.log("[Hubspot embed]: Form submitted"),window.dataLayer&&(e=window.location.pathname,dataLayer.push({event:"ga_event",eventCategory:"<blog><form>",eventAction:"<submitted><subscribe-form>",eventLabel:e,nonInteraction:!1})),this.onSubmitForm(),o&&o())})},init(e={}){getFormIdByLanguage()?(this.generateForm({target:e.target||FORM_WRAPPER_ID,formId:e.formId||getFormIdByLanguage()}),this.bindEvents(e.hasOwnProperty("onReady")?e.onReady:null,e.hasOwnProperty("onSubmit")?e.onSubmit:null)):console.warn("[Missing ID] Hubspot form ID not found for: "+FORM_LANG)}};function transformFormFieldsOnFormReady(e=[{name:"",type:"",newValue:""}]){""!=e.name&&e.forEach(e=>{if("text"===e.type){const t=document.querySelector(`input[name="${e.name}"]`);t&&(t.value=e.newValue)}})}
//# sourceMappingURL=hubspot.min.js.map
